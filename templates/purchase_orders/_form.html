<div class="row">
    <div class="form-check">
        <input type="checkbox" class="form-check-input" id="received-order-checkbox" <%= if (purchaseOrder.ReceivedDate.Valid) { %>checked<% } %>>
        <label class="form-check-label offset-md-3">Received order</label>
    </div>
</div>


<%
    let orderDate = today()
    let recDate = today()
    if (purchaseOrder.OrderDate.Valid) {
        orderDate = format_date(purchaseOrder.OrderDate)
    }
    if (purchaseOrder.ReceivedDate.Valid) {
        recDate = format_date(purchaseOrder.ReceivedDate)
    }
%>
<div class="row">
    <%= f.InputTag("OrderDate", {data-provide: "datepicker", id: "new-order-date", value: orderDate }) %>
</div>
<div class="row" id="received-date-input" <%= if (!purchaseOrder.ReceivedDate.Valid) { %>style="display: none"<% } %>>
    <%= f.InputTag("ReceivedDate", {data-provide: "datepicker", id: "new-received-date", value: recDate }) %>
</div>
<div class="row">
    <%= f.SelectTag("Vendor", {options: vendors, id: "new-order-vendor", name: "VendorID" }) %>
</div>

<input type="text" name="Items" style="visibility: collapse;"/>
<div class="row">
    <div id="vendor-items-table">
        <%= if (len(purchaseOrder.Items) > 0) { %>
            <%= partial("purchase_orders/inventory_items_datagrid.html") %>
        <% } %>    
    </div>
    <div id="category-breakdown">
        <%= if (len(purchaseOrder.Items) > 0) { %>
            <%= partial("partials/horizontal_percentage_chart.html", {categoryDetails: categoryDetails, title: title}) %>
        <% } %> 
    </div>
</div>
<%= if (errors) { %>
    <div class="row alert alert-danger">
        <%= errors %>
    </div>
<% } %>

<button class="btn btn-success" role="submit">Save</button>
